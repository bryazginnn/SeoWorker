<div class="container" >
  <div class="col-xs-4">
    <span ng-show="loading" class="spinner"></span>
    <div class="panel panel-info">
      <div class="panel-heading">Список сайтов
        <a class="pull-right btn btn-primary btn-xs tree-addbutton" nodrag ng-click="collapsed=!collapsed"
         ng-model="collapsed">
          <span class="glyphicon glyphicon-plus"></span>
        </a>
      </div>
      <div class="panel-body">
        <div ng-show="collapsed">
          <form class="form-inline">
            <input type="text" class="form-control" style="width:200px" ng-model="formData.url" placeholder="Введите url сайта">
            <button type="submit" class="btn btn-primary" ng-click="collapsed=!collapsed; newSite();">OK</button>
          </form>
        </div>
        
        <div ng-show="sites && sites.length>0"  ui-tree data-drag-enabled="false">
          <ol ui-tree-nodes ng-model="sites">
            <li ng-repeat="node in sites" ui-tree-node collapsed="true" ng-include="'partials/tree_template.html'"></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <div  class="col-xs-8">
    <div class="panel panel-info ">
      <div class="panel-heading">Настройки</div> 
      <div class="panel-body">
        <div class="form-inline">
          <label class="control-label" >Выбранный сайт: </label>
          <span ng-show="site" style="word-wrap: break-word">{{site.url}}</span>
          <span ng-show="!site" >не выбран</span>
        </div>
        <br>
        <div class="form-inline">
            <label class="control-label">Ключевая фраза: </label>
            <input type="text" class="form-control" style="width:400px;" ng-model="site.condition_query" >
        </div>
        <br>
        <button type="button" class="btn btn-primary" ng-show="changeSettings()" ng-click="saveSettings()">Cохранить настройки</button>
        <button type="button" class="btn btn-primary" ng-show="site && !changeSettings()" ng-click="getParams()">Получить данные</button>
          <a class="btn btn-success "ng-show="site && !changeSettings()" ng-click="calcParams()">
              <span class="glyphicon glyphicon-refresh"></span>
          </a>

      </div> 
      
    </div>
    <div class="panel panel-info ">
      <div class="panel-heading">
        Параметры<br>
        (для просмотра других графиков выберите другой параметр)
      </div> 
      <div class="panel-body">
          <select ng-show="params" ng-model="chart" class="form-control" style=" margin-left:50px; width: 300px"
                  ng-change="values = [chart]" ng-options="p as p.key for p in params"></select>
          <nvd3-line-chart ng-show="params"
                  data="values"
                  width="590"
                  height="350"
                  showXAxis="true"
                  showYAxis="true"
                  tooltips="true"
                  interactive="true">
          </nvd3-line-chart>
        <div ng-show="false" class="panel panel-default panel-body" >
          <ul  class="list-group" >
            <li class="list-group-item  panel-heading" ng-repeat="param in params" ng-include="'partials/params_template.html'">
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
